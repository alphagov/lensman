import ConfigParser
import subprocess


arguments = [ './webkit2png', '-W320', '-W640', '-W1024' ]
prefix = 'https://www.gov.uk'

config = ConfigParser.SafeConfigParser()
config.read(['example.conf'])


for name in config.options('paths'):
    command = list(arguments)

    command.append('-o')
    command.append(name)

    url = '%s%s' % ( prefix, config.get('paths', name) )
    command.append(url)

    subprocess.call( command, shell=False )
