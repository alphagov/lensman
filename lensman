import ConfigParser
import subprocess


arguments = [ './webkit2png' ]
prefix = 'https://www.gov.uk'

config = ConfigParser.SafeConfigParser()
config.read(['example.conf'])


for name in config.options('paths'):
    command = list(arguments)

    for width in config.options('widths'):
        command.append( '-W%s' % config.get('widths', width) )

    command.append('-o')
    command.append(name)

    url = '%s%s' % ( prefix, config.get('paths', name) )
    command.append(url)

    subprocess.call( command, shell=False )
